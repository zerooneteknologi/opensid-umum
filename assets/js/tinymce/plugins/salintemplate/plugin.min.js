tinymce.PluginManager.add('salintemplate', function (editor, url) {
    editor.ui.registry.addMenuButton('salintemplate', {
        text: 'Salin Template',
        fetch: function (callback) {
            var items = [];

            $.ajax({
                type: "GET",
                url: SITE_URL + "surat_master/salin_template",
                dataType: "json",
                processData: true,
                success: function (response) {
                    $.each(response, function (key, value) {
                        console.log(value.nama);
                        var menuItem = {
                            type: 'menuitem',
                            text: value.nama,
                            onAction: function () {
                                editor.insertContent(value.template);
                            }
                        };
                        items.push(menuItem);
                    });

                    callback(items);
                },

                error: function (xhr, status, error) {
                    alert("Error! " + xhr.status + "\n" + error);
                    console.log(xhr);
                }
            });
        },
    });
});